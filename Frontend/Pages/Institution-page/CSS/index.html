<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Publication generation</title>
    
    <!-- Local styles -->
    <link rel="stylesheet" href="CSS/styles.css">
    <script src="../scripts.js"></script>
    <!-- RepoSync styles -->
    <link rel="stylesheet" href="../../CSS/common.css">
    <link rel="stylesheet" href="../../CSS/styles.css">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Institution Header -->
    <header class="institution-header">
        <div class="header-content">
            <div class="institution-logo">
                <!-- Logo placeholder -->
                <div class="logo-placeholder">IIT Kashmir</div>
            </div>
            <div class="department-info">
                <h1>Sulochana's JavaScript Library</h1>
                <p>Department of Computer Science</p>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="institution-content">
        <!-- Department Overview -->
        <section class="department-overview">
            <h2>Research Publications</h2>
            <p>Explore researchers contributions through Googlescholar API.</p>
        </section>

        <!-- RepoSync Integration -->
        <section class="publications-section">
            <!-- Additional filters for department view -->
            <div class="department-filters">
                <label for="searchType">Search By:</label>
                <select id="facultyFilter" class="filter-select">
                    <option value="name">Author Name</option>
                    <option value="id">Unique ID</option>
                </select>
                <label for="searchInput">Enter Search Term:</label>
                <input type="text" id="yearFilter" class="filter-select" placeholder="Author Name or Unique ID" />
                <button id="searchButton">Search</button>
            </div>

            <!-- RepoSync Container -->
            <div id="reposync-container">
                <!-- RepoSync will initialize here -->
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="institution-footer">
        <p>&copy; 2024 Department of Computer Science, IIT Kashmir</p>
    </footer>
    
    <!-- <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Get references to HTML elements
            const searchButton = document.getElementById('searchButton');
            const searchTypeSelect = document.getElementById('facultyFilter');
            const searchInput = document.getElementById('yearFilter');
            const reposyncContainer = document.getElementById('reposync-container');

            searchButton.addEventListener('click', async () => {
                const searchType = searchTypeSelect.value;
                const searchTerm = searchInput.value.trim();

                // Clear previous results
                reposyncContainer.innerHTML = '';

                if (searchTerm === '') {
                    alert("Please enter a search term.");
                    return;
                }

                try {
                    if (searchType === 'name') {
                        // Search by author name
                        const response = await fetch(`http://localhost:3001/api/search?author_name=${encodeURIComponent(searchTerm)}`);
                        
                        if (!response.ok) {
                            const errorResponse = await response.json();
                            console.error(`Error: ${response.status} ${errorResponse.error}`);
                            alert(`Error: ${errorResponse.error}`);
                            return;
                        }

                        const data = await response.json();
                        displayAuthors(data.profiles);

                    } else if (searchType === 'id') {
                        // Redirect to researcher page with author ID
                        window.location.href = `../researcher-page/index.html?author_id=${encodeURIComponent(searchTerm)}`;
                    }

                } catch (error) {
                    console.error(error.message);
                    alert(`An error occurred: ${error.message}`);
                }
            });

            // Function to display authors in reposyncContainer
            function displayAuthors(authors) {
                if (authors && authors.length > 0) {
                    reposyncContainer.innerHTML = ''; // Clear previous results

                    authors.forEach(author => {
                        const authorDiv = document.createElement('div');
                        authorDiv.className = 'author';
                        authorDiv.innerHTML = `
                            <p><strong><a href="../researcher-page/index.html?author_id=${encodeURIComponent(author.author_id)}">${author.name}</a></strong></p>
                        `;
                        reposyncContainer.appendChild(authorDiv);
                    });
                } else {
                    reposyncContainer.innerHTML = '<p>No authors found.</p>';
                }
            }
        });
    </script> -->
</body>
</html>
